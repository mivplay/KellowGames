
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft HTML Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            text-align: center;
            padding: 15px;
            color: white;
            background: rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 5px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .control-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .game-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        #gameCanvas {
            border: 3px solid #4a5568;
            border-radius: 10px;
            background: #87CEEB;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            cursor: crosshair;
        }

        .block-selector {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 25px;
        }

        .block-option {
            width: 40px;
            height: 40px;
            border: 2px solid #4a5568;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .block-option:hover {
            transform: scale(1.1);
        }

        .block-option.selected {
            border: 3px solid #ffd700;
            transform: scale(1.15);
        }

        .grass { background: linear-gradient(to bottom, #7CFC00, #228B22); }
        .dirt { background: linear-gradient(to bottom, #8B4513, #654321); }
        .stone { background: linear-gradient(to bottom, #A9A9A9, #696969); }
        .wood { background: linear-gradient(to bottom, #DEB887, #8B4513); }
        .leaves { background: linear-gradient(to bottom, #32CD32, #228B22); }
        .sand { background: linear-gradient(to bottom, #F4A460, #D2691E); }

        .stats {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÆ Minecraft HTML Edition</h1>
        <div class="controls">
            <div class="control-item">WASD - –î–≤–∏–∂–µ–Ω–∏–µ</div>
            <div class="control-item">–õ–ö–ú - –õ–æ–º–∞—Ç—å –±–ª–æ–∫</div>
            <div class="control-item">–ü–ö–ú - –°—Ç–∞–≤–∏—Ç—å –±–ª–æ–∫</div>
            <div class="control-item">1-6 - –í—ã–±–æ—Ä –±–ª–æ–∫–∞</div>
        </div>
    </div>

    <div class="game-container">
        <canvas id="gameCanvas" width="800" height="500"></canvas>
    </div>

    <div class="block-selector">
        <div class="block-option grass selected" data-block="grass"></div>
        <div class="block-option dirt" data-block="dirt"></div>
        <div class="block-option stone" data-block="stone"></div>
        <div class="block-option wood" data-block="wood"></div>
        <div class="block-option leaves" data-block="leaves"></div>
        <div class="block-option sand" data-block="sand"></div>
    </div>

    <div class="stats">
        <div>–ü–æ–∑–∏—Ü–∏—è: <span id="position">0, 0</span></div>
        <div>–ë–ª–æ–∫–æ–≤: <span id="blocksCount">0</span></div>
    </div>

    <script>
        // –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã
        const TILE_SIZE = 32;
        const WORLD_WIDTH = 50;
        const WORLD_HEIGHT = 50;
        const GRAVITY = 0.5;
        const JUMP_FORCE = -12;
        
        // –¢–∏–ø—ã –±–ª–æ–∫–æ–≤
        const BLOCK_TYPES = {
            grass: { name: '–¢—Ä–∞–≤–∞', color: ['#7CFC00', '#228B22'] },
            dirt: { name: '–ó–µ–º–ª—è', color: ['#8B4513', '#654321'] },
            stone: { name: '–ö–∞–º–µ–Ω—å', color: ['#A9A9A9', '#696969'] },
            wood: { name: '–î–µ—Ä–µ–≤–æ', color: ['#DEB887', '#8B4513'] },
            leaves: { name: '–õ–∏—Å—Ç–≤–∞', color: ['#32CD32', '#228B22'] },
            sand: { name: '–ü–µ—Å–æ–∫', color: ['#F4A460', '#D2691E'] }
        };

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let canvas, ctx;
        let world = [];
        let player = {
            x: 250,
            y: 200,
            width: 24,
            height: 36,
            velX: 0,
            velY: 0,
            speed: 5,
            onGround: false,
            selectedBlock: 'grass'
        };
        let keys = {};
        let blocksCount = 0;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            generateWorld();
            setupEventListeners();
            gameLoop();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏—Ä–∞
        function generateWorld() {
            world = Array(WORLD_HEIGHT).fill().map(() => Array(WORLD_WIDTH).fill(null));
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã—Å–æ—Ç—ã –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
            const surfaceHeights = [];
            let height = Math.floor(WORLD_HEIGHT * 0.6);
            
            for (let x = 0; x < WORLD_WIDTH; x++) {
                // –ù–µ–±–æ–ª—å—à–∏–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—ã—Å–æ—Ç—ã
                height += Math.floor(Math.random() * 3) - 1;
                height = Math.max(Math.floor(WORLD_HEIGHT * 0.4), Math.min(Math.floor(WORLD_HEIGHT * 0.8), height));
                surfaceHeights[x] = height;
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤
            for (let x = 0; x < WORLD_WIDTH; x++) {
                const surfaceY = surfaceHeights[x];
                
                // –¢—Ä–∞–≤–∞ –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
                if (surfaceY < WORLD_HEIGHT - 1) {
                    world[surfaceY][x] = 'grass';
                }
                
                // –ó–µ–º–ª—è –ø–æ–¥ —Ç—Ä–∞–≤–æ–π
                for (let y = surfaceY + 1; y < Math.min(surfaceY + 4, WORLD_HEIGHT); y++) {
                    world[y][x] = 'dirt';
                }
                
                // –ö–∞–º–µ–Ω—å –≥–ª—É–±–∂–µ
                for (let y = surfaceY + 4; y < WORLD_HEIGHT; y++) {
                    world[y][x] = 'stone';
                }
                
                // –°–ª—É—á–∞–π–Ω—ã–µ –¥–µ—Ä–µ–≤—å—è
                if (Math.random() < 0.05 && surfaceY > 5) {
                    const treeHeight = 4 + Math.floor(Math.random() * 3);
                    for (let y = surfaceY - 1; y >= surfaceY - treeHeight; y--) {
                        if (y >= 0) {
                            world[y][x] = 'wood';
                        }
                    }
                    // –õ–∏—Å—Ç–≤–∞
                    for (let dy = -3; dy <= 0; dy++) {
                        for (let dx = -2; dx <= 2; dx++) {
                            const lx = x + dx;
                            const ly = surfaceY - treeHeight + dy;
                            if (lx >= 0 && lx < WORLD_WIDTH && ly >= 0 && ly < WORLD_HEIGHT) {
                                if (Math.random() < 0.7 && world[ly][lx] === null) {
                                    world[ly][lx] = 'leaves';
                                }
                            }
                        }
                    }
                }
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            document.addEventListener('keydown', (e) => {
                keys[e.key.toLowerCase()] = true;
                
                // –í—ã–±–æ—Ä –±–ª–æ–∫–æ–≤ —Ü–∏—Ñ—Ä–∞–º–∏
                if (e.key >= '1' && e.key <= '6') {
                    const blockTypes = Object.keys(BLOCK_TYPES);
                    const index = parseInt(e.key) - 1;
                    if (index < blockTypes.length) {
                        player.selectedBlock = blockTypes[index];
                        updateBlockSelection();
                    }
                }
            });
            
            document.addEventListener('keyup', (e) => {
                keys[e.key.toLowerCase()] = false;
            });
            
            // –ú—ã—à—å
            canvas.addEventListener('mousedown', handleMouseClick);
            
            // –í—ã–±–æ—Ä –±–ª–æ–∫–æ–≤
            document.querySelectorAll('.block-option').forEach(option => {
                option.addEventListener('click', () => {
                    player.selectedBlock = option.dataset.block;
                    updateBlockSelection();
                });
            });
        }

        function updateBlockSelection() {
            document.querySelectorAll('.block-option').forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.block === player.selectedBlock) {
                    option.classList.add('selected');
                }
            });
        }

        function handleMouseClick(e) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;
            
            // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º—ã—à–∏ –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∏—Ä–∞
            const worldX = Math.floor((mouseX + player.x - canvas.width / 2) / TILE_SIZE);
            const worldY = Math.floor((mouseY + player.y - canvas.height / 2) / TILE_SIZE);
            
            if (worldX >= 0 && worldX < WORLD_WIDTH && worldY >= 0 && worldY < WORLD_HEIGHT) {
                if (e.button === 0) { // –õ–ö–ú - –ª–æ–º–∞—Ç—å
                    if (world[worldY][worldX] !== null) {
                        world[worldY][worldX] = null;
                        blocksCount--;
                        updateStats();
                    }
                } else if (e.button === 2) { // –ü–ö–ú - —Å—Ç—Ä–æ–∏—Ç—å
                    if (world[worldY][worldX] === null) {
                        world[worldY][worldX] = player.selectedBlock;
                        blocksCount++;
                        updateStats();
                    }
                }
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            document.getElementById('position').textContent = `${Math.floor(player.x / TILE_SIZE)}, ${Math.floor(player.y / TILE_SIZE)}`;
            document.getElementById('blocksCount').textContent = blocksCount;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
        function updatePlayer() {
            // –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
            player.velX = 0;
            if (keys['a'] || keys['arrowleft']) player.velX = -player.speed;
            if (keys['d'] || keys['arrowright']) player.velX = player.speed;
            
            // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (–ø—Ä—ã–∂–æ–∫)
            if ((keys['w'] || keys['arrowup'] || keys[' ']) && player.onGround) {
                player.velY = JUMP_FORCE;
                player.onGround = false;
            }
            
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏
            player.velY += GRAVITY;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
            player.x += player.velX;
            player.y += player.velY;
            
            // –ö–æ–ª–ª–∏–∑–∏–∏ —Å –±–ª–æ–∫–∞–º–∏
            handleCollisions();
            
            // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü –º–∏—Ä–∞
            player.x = Math.max(0, Math.min(player.x, WORLD_WIDTH * TILE_SIZE - player.width));
            player.y = Math.max(0, Math.min(player.y, WORLD_HEIGHT * TILE_SIZE - player.height));
        }

        function handleCollisions() {
            player.onGround = false;
            
            const playerLeft = Math.floor(player.x / TILE_SIZE);
            const playerRight = Math.floor((player.x + player.width - 1) / TILE_SIZE);
            const playerTop = Math.floor(player.y / TILE_SIZE);
            const playerBottom = Math.floor((player.y + player.height - 1) / TILE_SIZE);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π
            for (let y = playerTop; y <= playerBottom; y++) {
                for (let x = playerLeft; x <= playerRight; x++) {
                    if (x >= 0 && x < WORLD_WIDTH && y >= 0 && y < WORLD_HEIGHT) {
                        if (world[y][x] !== null) {
                            const blockLeft = x * TILE_SIZE;
                            const blockRight = (x + 1) * TILE_SIZE;
                            const blockTop = y * TILE_SIZE;
                            const blockBottom = (y + 1) * TILE_SIZE;
                            
                            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
                            if (player.x < blockRight && 
                                player.x + player.width > blockLeft && 
                                player.y < blockBottom && 
                                player.y + player.height > blockTop) {
                                
                                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–æ—Ä–æ–Ω—É –∫–æ–ª–ª–∏–∑–∏–∏
                                const overlapLeft = player.x + player.width - blockLeft;
                                const overlapRight = blockRight - player.x;
                                const overlapTop = player.y + player.height - blockTop;
                                const overlapBottom = blockBottom - player.y;
                                
                                const minOverlap = Math.min(overlapLeft, overlapRight, overlapTop, overlapBottom);
                                
                                if (minOverlap === overlapTop && player.velY >= 0) {
                                    // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–Ω–∏–∑—É (–Ω–∞ –∑–µ–º–ª–µ)
                                    player.y = blockTop - player.height;
                                    player.velY = 0;
                                    player.onGround = true;
                                } else if (minOverlap === overlapBottom && player.velY <= 0) {
                                    // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–≤–µ—Ä—Ö—É
                                    player.y = blockBottom;
                                    player.velY = 0;
                                } else if (minOverlap === overlapLeft && player.velX >= 0) {
                                    // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–ª–µ–≤–∞
                                    player.x = blockLeft - player.width;
                                    player.velX = 0;
                                } else if (minOverlap === overlapRight && player.velX <= 0) {
                                    // –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞
                                    player.x = blockRight;
                                    player.velX = 0;
                                }
                            }
                        }
                    }
                }
            }
        }

        // –û—Ç—Ä–∏—Å–æ–≤–∫–∞
        function render() {
            // –û—á–∏—Å—Ç–∫–∞ canvas
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏
            const offsetX = player.x - canvas.width / 2;
            const offsetY = player.y - canvas.height / 2;
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–ª–æ–∫–æ–≤
            for (let y = 0; y < WORLD_HEIGHT; y++) {
                for (let x = 0; x < WORLD_WIDTH; x++) {
                    if (world[y][x] !== null) {
                        const screenX = x * TILE_SIZE - offsetX;
                        const screenY = y * TILE_SIZE - offsetY;
                        
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏
                        if (screenX + TILE_SIZE > 0 && screenX < canvas.width && 
                            screenY + TILE_SIZE > 0 && screenY < canvas.height) {
                            
                            const blockType = BLOCK_TYPES[world[y][x]];
                            if (blockType) {
                                // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±–ª–æ–∫
                                const gradient = ctx.createLinearGradient(
                                    screenX, screenY, 
                                    screenX, screenY + TILE_SIZE
                                );
                                gradient.addColorStop(0, blockType.color[0]);
                                gradient.addColorStop(1, blockType.color[1]);
                                
                                ctx.fillStyle = gradient;
                                ctx.fillRect(screenX, screenY, TILE_SIZE, TILE_SIZE);
                                
                                // –û–±–≤–æ–¥–∫–∞ –±–ª–æ–∫–∞
                                ctx.strokeStyle = 'rgba(0, 0, 0, 0.3)';
                                ctx.lineWidth = 1;
                                ctx.strokeRect(screenX, screenY, TILE_SIZE, TILE_SIZE);
                            }
                        }
                    }
                }
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∏–≥—Ä–æ–∫–∞
            const playerScreenX = player.x - offsetX;
            const playerScreenY = player.y - offsetY;
            
            ctx.fillStyle = '#FF6B35';
            ctx.fillRect(playerScreenX, playerScreenY, player.width, player.height);
            
            // –ì–ª–∞–∑–∞ –∏–≥—Ä–æ–∫–∞
            ctx.fillStyle = 'white';
            ctx.fillRect(playerScreenX + 6, playerScreenY + 8, 4, 4);
            ctx.fillRect(playerScreenX + 14, playerScreenY + 8, 4, 4);
            ctx.fillStyle = 'black';
            ctx.fillRect(playerScreenX + 7, playerScreenY + 9, 2, 2);
            ctx.fillRect(playerScreenX + 15, playerScreenY + 9, 2, 2);
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
        function gameLoop() {
            updatePlayer();
            render();
            updateStats();
            requestAnimationFrame(gameLoop);
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        window.addEventListener('load', init);
        
        // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
        document.addEventListener('contextmenu', (e) => {
            if (e.target === canvas) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
